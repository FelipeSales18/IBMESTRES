{% extends 'base.html' %}
{% block title %}Gerar Equipes{% endblock %}

{% block content %}
<h1>Gerar Equipes</h1>

<!-- Formulário para entrada de parâmetros -->
<form method="get" action="{% url 'gerar_equipes' %}" class="mb-4">
    <div class="row">
        <div class="col-md-4">
            <label for="numero_equipes" class="form-label">Número de Equipes</label>
            <input type="number" id="numero_equipes" name="numero_equipes" class="form-control" value="{{ request.GET.numero_equipes|default:3 }}" required>
        </div>
        <div class="col-md-4">
            <label for="pessoas_por_equipe" class="form-label">Pessoas por Equipe</label>
            <input type="number" id="pessoas_por_equipe" name="pessoas_por_equipe" class="form-control" value="{{ request.GET.pessoas_por_equipe|default:5 }}" required>
        </div>
        <div class="col-md-4 d-flex align-items-end">
            <button type="submit" class="btn btn-primary">Gerar</button>
        </div>
    </div>
</form>

<!-- Exibição das equipes geradas -->
<h2>Equipes Geradas</h2>
{% for equipe in equipes %}
    <h3>Equipe {{ forloop.counter }}</h3>
    <h4>Scrum Master</h4>
    <p>
        {% if equipe.scrum_master %}
            {{ equipe.scrum_master.name }} ({{ equipe.scrum_master.exp_in_year }} anos de experiência)
        {% else %}
            Nenhum Scrum Master disponível.
        {% endif %}
    </p>

    <h4>Product Owner</h4>
    <p>
        {% if equipe.product_owner %}
            {{ equipe.product_owner.name }} ({{ equipe.product_owner.exp_in_year }} anos de experiência)
        {% else %}
            Nenhum Product Owner disponível.
        {% endif %}
    </p>

    <h4>Developers</h4>
    <ul>
        {% for dev in equipe.developers %}
            <li>{{ dev.name }} ({{ dev.exp_in_year }} anos de experiência)</li>
        {% endfor %}
    </ul>
{% endfor %}
{% endblock %}