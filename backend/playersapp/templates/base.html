{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{% block title %}ScrumSync{% endblock %}</title>
	<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">

	<!-- CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
	<link rel="stylesheet" href="{% static 'css/style.css' %}">
	<link rel="stylesheet" href="{% static 'playersapp/navbar.css' %}">
	<link rel="stylesheet" href="{% static 'playersapp/listar_funcionarios.css' %}">

	{% block extra_css %}{% endblock %} <!-- <-- adicionado aqui -->
</head>
<body>  
	
	{% include 'navbar.html' %}
 
	<div class="container"> 
		{% if user.is_authenticated %}
			<div class="d-flex align-items-center mb-3">
				<img id="globalProfileImg" src="{% static 'playersapp/default_user.png' %}" alt="Foto do usuário" class="profile-img" style="width:40px; height:40px; border-radius:50%; object-fit:cover; margin-right:12px;">
				<h1 style="margin:0;">Olá, {{ user.username }}</h1>
			</div>
			{% if not user.is_staff %}
				<div class="mb-3">
					<h5>Meus Projetos</h5>
					<ul class="list-group">
						{% for projeto in user.projects %}
							<li class="list-group-item">
								<strong>Projeto:</strong> {{ projeto.nome }}<br>
								<strong>Equipe:</strong> {{ projeto.equipe.nome }}<br>
								<strong>Função:</strong> {{ projeto.funcao }}
							</li>
						{% empty %}
							<li class="list-group-item">Nenhum projeto atribuído.</li>
						{% endfor %}
					</ul>
				</div>
			{% endif %}
		{% endif %} 
		{% block content %}{% endblock %} 
	</div>

	<!-- JS-->
	<script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
	<script src="{% static 'js/scripts.js' %}"></script>

	{% block scripts %}{% endblock scripts %} 
	<script>
	document.addEventListener('DOMContentLoaded', function () {
		const globalImg = document.getElementById('globalProfileImg');
		const FOTO_KEY = 'fotoPerfilDataUrl';
		const saved = localStorage.getItem(FOTO_KEY);
		if (saved && globalImg) {
			globalImg.src = saved;
		}
	});
	</script>

</body>
</html>

